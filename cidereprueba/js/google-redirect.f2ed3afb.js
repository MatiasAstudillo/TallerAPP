(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["google-redirect"],{a22a:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-layout-frame",{attrs:{id:"google",container:"tight",title:"Google"}},[o("app-layout-form",{attrs:{loading:e.busy.google,"reset-text":"volver al inicio","submit-text":"conectarse",title:"Conectarse con Google"},on:{reset:e.handleFormReset,submit:e.handleFormSubmit}},[o("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e.busy.google?[o("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"100",width:"8"}})]:[o("h4",{staticClass:"subtitle-1"},[e._v(" No se pudo conectar a Google. Contacte a un administrador para solucionar este problema.")])]],2)],1)],1)},n=[],r=o("c7eb"),c=o("1da1"),s=o("c1f5"),i={name:"v-view-google-redirect",data:function(){return{busy:{google:!1},gGoogle:{}}},methods:{getGoogle:function(){this.gGoogle=s["a"].toAccess(),this.gGoogle.auth=this.$route.query.state,this.gGoogle.code=this.$route.query.code},handleError:function(e){s["a"].translate(e).then(this.$toast.error)},handleFormReset:function(){this.$router.push("/")},handleFormSubmit:function(){var e=this;return Object(c["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.busy.google=!0,t.next=3,s["a"].access(e.gGoogle).then(e.handleSuccess).catch(e.handleError);case 3:e.busy.google=!1;case 4:case"end":return t.stop()}}),t)})))()},handleSuccess:function(e){s["a"].translate({response:e}).then(this.$toast.error)}},mounted:function(){this.getGoogle(),this.handleFormSubmit()}},u=i,l=o("2877"),h=o("6544"),g=o.n(h),p=o("62ad"),d=o("490a"),f=Object(l["a"])(u,a,n,!1,null,null,null);t["default"]=f.exports;g()(f,{VCol:p["a"],VProgressCircular:d["a"]})},c1f5:function(e,t,o){"use strict";o.d(t,"a",(function(){return g}));var a=o("d4ec"),n=o("bee2"),r=o("262e"),c=o("2caf"),s=(o("99af"),o("bc3a")),i=o.n(s),u=o("ce42"),l=o("cf67"),h=function(e){Object(r["a"])(o,e);var t=Object(c["a"])(o);function o(){return Object(a["a"])(this,o),t.apply(this,arguments)}return Object(n["a"])(o,null,[{key:"resource",value:function(){return"google"}}]),o}(l["a"]),g=function(e){Object(r["a"])(o,e);var t=Object(c["a"])(o);function o(){return Object(a["a"])(this,o),t.apply(this,arguments)}return Object(n["a"])(o,null,[{key:"access",value:function(e){return i.a.request({method:"post",url:e.many("access").$uri,headers:{authorization:"Bearer ".concat(e.authToken)},data:{code:e.code,redirectUri:e.redirectUri}})}},{key:"getAccessType",value:function(){return"offline"}},{key:"getPrompt",value:function(){return"consent"}},{key:"getBaseLink",value:function(){return"https://accounts.google.com/o/oauth2/v2/auth"}},{key:"getClientId",value:function(){return"352584828099-6iftsb0klh2ahrtjbh2th3oja8l2mvle.apps.googleusercontent.com"}},{key:"getLink",value:function(){return"".concat(this.getBaseLink(),"?response_type=code&client_id=").concat(this.getClientId(),"&scope=").concat(this.getScope(),"&redirect_uri=").concat(this.getRedirectUri(),"&access_type=").concat(this.getAccessType(),"&prompt=").concat(this.getPrompt())}},{key:"getRedirectUri",value:function(){return"https://eindustrial.api.sys.dev.innlab.cl/api/google-access"}},{key:"getScope",value:function(){return"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/calendar"}},{key:"model",value:function(){return h}},{key:"toAccess",value:function(){return this.shape({code:"",auth:""})}}]),o}(u["a"])}}]);
//# sourceMappingURL=google-redirect.f2ed3afb.js.map