(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mc-mining-company-platforms"],{"19eb":function(e,t,a){"use strict";a("50f4")},"50f4":function(e,t,a){},"8ce7":function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("d4ec"),r=a("bee2"),c=a("262e"),o=a("2caf"),s=(a("d3b7"),a("7db0"),a("bc3a")),i=a.n(s),u=a("ce42"),l=a("cf67"),d=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,[{key:"requestResetPassword",value:function(){return this.many("request_reset_password")}},{key:"toRequestResetPassword",value:function(){return this.reduce(["rut"])}}],[{key:"resource",value:function(){return"user_account"}}]),a}(l["a"]),f=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,null,[{key:"disable",value:function(e){return e.many("disable").attach(e.reduce(["observation"]))}},{key:"enable",value:function(e){return e.many("enable").attach()}},{key:"getBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.log({opts:e}),this.query().where("userId",e.gUserAccountId).page(e.page).limit(e.limit).paginate()}},{key:"getById",value:function(e){return this.query().find(e)}},{key:"getByToken",value:function(e){return i.a.request({method:"get",url:"".concat("https://api.espacioindustria.cl/api","/user_account/me"),headers:{Authorization:"Bearer ".concat(e)}})}},{key:"model",value:function(){return d}},{key:"requestResetPassword",value:function(e){return e.requestResetPassword().attach(e.toRequestResetPassword())}},{key:"resetPassword",value:function(e){return e.many("reset_password").attach({email:e.email,password:e.password,token:e.token})}},{key:"toRecovery",value:function(){return this.shape({rut:""})}},{key:"verify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.shape({id:"verify"}).attach(e)}}]),a}(u["a"])},c1f5:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a("d4ec"),r=a("bee2"),c=a("262e"),o=a("2caf"),s=(a("99af"),a("bc3a")),i=a.n(s),u=a("ce42"),l=a("cf67"),d=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,null,[{key:"resource",value:function(){return"google"}}]),a}(l["a"]),f=function(e){Object(c["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,null,[{key:"access",value:function(e){return i.a.request({method:"post",url:e.many("access").$uri,headers:{authorization:"Bearer ".concat(e.authToken)},data:{code:e.code,redirectUri:e.redirectUri}})}},{key:"getAccessType",value:function(){return"offline"}},{key:"getPrompt",value:function(){return"consent"}},{key:"getBaseLink",value:function(){return"https://accounts.google.com/o/oauth2/v2/auth"}},{key:"getClientId",value:function(){return"352584828099-6iftsb0klh2ahrtjbh2th3oja8l2mvle.apps.googleusercontent.com"}},{key:"getLink",value:function(){return"".concat(this.getBaseLink(),"?response_type=code&client_id=").concat(this.getClientId(),"&scope=").concat(this.getScope(),"&redirect_uri=").concat(this.getRedirectUri(),"&access_type=").concat(this.getAccessType(),"&prompt=").concat(this.getPrompt())}},{key:"getRedirectUri",value:function(){return"https://eindustrial.api.sys.dev.innlab.cl/api/google-access"}},{key:"getScope",value:function(){return"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/calendar"}},{key:"model",value:function(){return d}},{key:"toAccess",value:function(){return this.shape({code:"",auth:""})}}]),a}(u["a"])},e2f7:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-layout-form",{staticClass:"blue-background",attrs:{id:"platforms","no-actions":"",title:"Zoom"}},[a("v-col",{attrs:{cols:"12"}},[a("v-list",{staticClass:"blue-background",attrs:{"two-lines":""}},[a("v-list-item",{attrs:{href:e.zoomLink,target:"_blank"}},[a("v-list-item-avatar",{attrs:{color:"primary"}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-video")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Acceder a ZOOM")]),a("v-list-item-subtitle",[e._v("Programa de video-llamadas y reuniones virtuales")])],1)],1),a("v-list-item",{attrs:{href:e.googleLink,target:"_blank"}},[a("v-list-item-avatar",{attrs:{color:"primary"}},[a("v-icon",{attrs:{dark:""}},[e._v("mdi-calendar")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v("Acceder a Google Calendar")]),a("v-list-item-subtitle",[e._v("Permite ver, agregar y agendar eventos en tu cuenta Google.")])],1)],1)],1)],1)],1)},r=[],c=a("c7eb"),o=a("5530"),s=a("1da1"),i=(a("a15b"),a("ac1f"),a("1276"),a("99af"),a("fcd2")),u=a("c1f5"),l=a("cf8d"),d=a("8ce7"),f={name:"v-view-account",computed:{authToken:function(){return this.$store.getters["AuthModule/token"].split("Bearer ").join("")},googleLink:function(){return"".concat(u["a"].getLink(),"&state=").concat(this.authToken)},zoomLink:function(){return"".concat(l["a"].getLink(),"&state=").concat(this.authToken)}},data:function(){return{busy:{representative:!1},gUserAccount:{},pProvider:{}}},methods:{getUserAccountByToken:function(){var e=this;return Object(s["a"])(Object(c["a"])().mark((function t(){return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.busy.representative=!0,t.next=3,d["a"].getByToken(e.$route.query.state);case 3:return e.gUserAccount=t.sent,t.next=6,e.$store.dispatch("AuthModule/setData",{data:Object(o["a"])(Object(o["a"])({accessToken:e.$route.query.state,tokenType:"Bearer"},e.gUserAccount.data),{},{userAccount:void 0})});case 6:return t.next=8,e.$store.dispatch("UserModule/setData",{data:e.gUserAccount.data});case 8:if("provider"!==e.gUserAccount.data.profile.code){t.next=11;break}return t.next=11,i["a"].getById(e.gUserAccount.data.profile.relatedId).then((function(t){return e.$store.dispatch("ProviderModule/setData",{data:t})}));case 11:e.$toast.success("Conectado exitosamente."),e.busy.representative=!1;case 13:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.$route.query.state&&this.getUserAccountByToken()}},v=f,p=(a("19eb"),a("2877")),h=a("6544"),g=a.n(h),y=a("62ad"),m=a("132d"),k=a("8860"),b=a("da13"),w=a("8270"),j=a("5d23"),O=Object(p["a"])(v,n,r,!1,null,null,null);t["default"]=O.exports;g()(O,{VCol:y["a"],VIcon:m["a"],VList:k["a"],VListItem:b["a"],VListItemAvatar:w["a"],VListItemContent:j["b"],VListItemSubtitle:j["c"],VListItemTitle:j["d"]})}}]);
//# sourceMappingURL=mc-mining-company-platforms.121df8d9.js.map