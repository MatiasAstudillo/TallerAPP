(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["g-user-account-documents"],{"8f43":function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=n("bee2"),i=n("d4ec"),o=n("ade3"),u=(n("ac1f"),n("00b4"),n("d3b7"),n("25f0"),n("5319"),n("fb6a"),function(t,e,n,r){this.name=t,this.fn=e,this.args=n,this.modifiers=r});function c(t,e){return void 0===e&&(e="simple"),"object"===typeof t?t[e]:t}function a(t,e){if(t.length){var n=t.shift(),r=a(t,e);return n.perform(r)}return c(e)}function s(t,e){if(t.length){var n=t.shift(),r=s(t,e);return n.performAsync(r)}return function(t){return Promise.resolve(c(e,"async")(t))}}u.prototype._test=function(t){var e=this.fn;try{a(this.modifiers.slice(),e)(t)}catch(n){e=function(){return!1}}try{return a(this.modifiers.slice(),e)(t)}catch(r){return!1}},u.prototype._check=function(t){try{a(this.modifiers.slice(),this.fn)(t)}catch(e){if(a(this.modifiers.slice(),(function(t){return t}))(!1))return}if(!a(this.modifiers.slice(),this.fn)(t))throw null},u.prototype._testAsync=function(t){var e=this;return new Promise((function(n,r){s(e.modifiers.slice(),e.fn)(t).then((function(e){e?n(t):r(null)})).catch((function(t){return r(t)}))}))};var l=function(t,e,n){this.name=t,this.perform=e,this.performAsync=n},f=function(t){function e(n,r,i,o){var u=[],c=arguments.length-4;while(c-- >0)u[c]=arguments[c+4];t.call(this,u),t.captureStackTrace&&t.captureStackTrace(this,e),this.rule=n,this.value=r,this.cause=i,this.target=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),d=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.chain=t,this.nextRuleModifiers=e};function p(t,e,n,r){if(e.length){var i=e.shift();i._testAsync(t).then((function(){p(t,e,n,r)}),(function(e){r(new f(i,t,e))}))}else n(t)}function h(){return void 0!==typeof Proxy?v(new d):b(new d)}d.prototype._applyRule=function(t,e){var n=this;return function(){var r=[],i=arguments.length;while(i--)r[i]=arguments[i];return n.chain.push(new u(e,t.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}},d.prototype._applyModifier=function(t,e){return this.nextRuleModifiers.push(new l(e,t.simple,t.async)),this},d.prototype._clone=function(){return new d(this.chain.slice(),this.nextRuleModifiers.slice())},d.prototype.test=function(t){return this.chain.every((function(e){return e._test(t)}))},d.prototype.testAll=function(t){var e=[];return this.chain.forEach((function(n){try{n._check(t)}catch(r){e.push(new f(n,t,r))}})),e},d.prototype.check=function(t){this.chain.forEach((function(e){try{e._check(t)}catch(n){throw new f(e,t,n)}}))},d.prototype.testAsync=function(t){var e=this;return new Promise((function(n,r){p(t,e.chain.slice(),n,r)}))};var m={};function v(t){return new Proxy(t,{get:function(e,n){if(n in e)return e[n];var r=v(t._clone());return n in y?r._applyModifier(y[n],n):n in m?r._applyRule(m[n],n):n in w?r._applyRule(w[n],n):void 0}})}function b(t){var e=function(t,e){return Object.keys(t).forEach((function(n){e[n]=function(){var r=[],i=arguments.length;while(i--)r[i]=arguments[i];var o=b(e._clone()),u=o._applyRule(t[n],n).apply(void 0,r);return u}})),e},n=e(w,t),r=e(m,n);return Object.keys(y).forEach((function(t){Object.defineProperty(r,t,{get:function(){var e=b(r._clone());return e._applyModifier(y[t],t)}})})),r}h.extend=function(t){Object.assign(m,t)},h.clearCustomRules=function(){m={}};var y={not:{simple:function(t){return function(e){return!t(e)}},async:function(t){return function(e){return Promise.resolve(t(e)).then((function(t){return!t})).catch((function(){return!0}))}}},some:{simple:function(t){return function(e){return g(e).some((function(e){try{return t(e)}catch(n){return!1}}))}},async:function(t){return function(e){return Promise.all(g(e).map((function(e){try{return t(e).catch((function(){return!1}))}catch(n){return!1}}))).then((function(t){return t.some(Boolean)}))}}},every:{simple:function(t){return function(e){return!1!==e&&g(e).every(t)}},async:function(t){return function(e){return Promise.all(g(e).map(t)).then((function(t){return t.every(Boolean)}))}}}};function g(t){return"string"===typeof t?t.split(""):t}var w={equal:function(t){return function(e){return e==t}},exact:function(t){return function(e){return e===t}},number:function(t){return void 0===t&&(t=!0),function(e){return"number"===typeof e&&(t||isFinite(e))}},integer:function(){return function(t){var e=Number.isInteger||k;return e(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return j("string")},boolean:function(){return j("boolean")},undefined:function(){return j("undefined")},null:function(){return j("null")},array:function(){return j("array")},object:function(){return j("object")},instanceOf:function(t){return function(e){return e instanceof t}},pattern:function(t){return function(e){return t.test(e)}},lowercase:function(){return function(t){return/^([a-z]+\s*)+$/.test(t)}},uppercase:function(){return function(t){return/^([A-Z]+\s*)+$/.test(t)}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(e){return e[0]==t}},last:function(t){return function(e){return e[e.length-1]==t}},empty:function(){return function(t){return 0===t.length}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(e){return e.length>=t}},maxLength:function(t){return function(e){return e.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,e){return function(n){return n>=t&&n<=e}},range:function(t,e){return function(n){return n>=t&&n<=e}},lessThan:function(t){return function(e){return e<t}},lessThanOrEqual:function(t){return function(e){return e<=t}},greaterThan:function(t){return function(e){return e>t}},greaterThanOrEqual:function(t){return function(e){return e>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(e){return~e.indexOf(t)}},schema:function(t){return O(t)},passesAnyOf:function(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];return function(e){return t.some((function(t){return t.test(e)}))}},optional:function(t,e){return void 0===e&&(e=!1),function(n){return e&&"string"===typeof n&&""===n.trim()||void 0!==n&&null!==n&&t.check(n),!0}}};function j(t){return function(e){return Array.isArray(e)&&"array"===t||null===e&&"null"===t||typeof e===t}}function k(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}function O(t){return{simple:function(e){var n=[];if(Object.keys(t).forEach((function(r){var i=t[r];try{i.check((e||{})[r])}catch(o){o.target=r,n.push(o)}})),n.length>0)throw n;return!0},async:function(e){var n=[],r=Object.keys(t).map((function(r){var i=t[r];return i.testAsync((e||{})[r]).catch((function(t){t.target=r,n.push(t)}))}));return Promise.all(r).then((function(){if(n.length>0)throw n;return!0}))}}}var P=h,x=Object(r["a"])((function t(){Object(i["a"])(this,t)}));Object(o["a"])(x,"email",(function(t){return P().string().pattern(/[^\s@]+@[^\s@]+\.[^\s@]+/).test(t)||"Formato incorrecto."})),Object(o["a"])(x,"length",(function(t){return function(e){return P().length(t).test(e.toString())||"".concat(t," caracteres.")}})),Object(o["a"])(x,"numeric",(function(t){return P().numeric().test(t)||"Solo nÃºmeros."})),Object(o["a"])(x,"max",(function(t){return function(e){return P().string().maxLength(t).test(e)||"MÃ¡ximo ".concat(t," caracteres.")}})),Object(o["a"])(x,"min",(function(t){return function(e){return P().string().minLength(t).test(e)||"MÃ­nimo ".concat(t," caracteres.")}})),Object(o["a"])(x,"required",(function(t){return P().not.null().test(t)||"Campo requerido."})),Object(o["a"])(x,"notEmpty",(function(t){return P().string().minLength(1).test(t)||"Campo requerido."})),Object(o["a"])(x,"rut",(function(t){if("70298600-0"===t)return!0;for(var e=t.toString().toLowerCase(),n=e.replace(/\./g,"").replace(/-/g,""),r=n.slice(0,-1),i=n.slice(-1),o=0,u=7,c=2,a=1;a<=r.length;a++)o+=c*n.charAt(r.length-a),c=c<u?c+1:2;var s=11-o%11;return(10==s?"k":11==s?"0":s)==i||"Rut invalido."})),Object(o["a"])(x,"select",(function(t){return P().numeric().test(t)||"Selecciona una opciÃ³n."})),Object(o["a"])(x,"url",(function(t){return!t||(P().string().pattern(/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/).test(t)||"URL incorrecta.")})),Object(o["a"])(x,"urlhttps",(function(t){return!t||(P().string().pattern(/^(http[s]?:\/\/){1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/).test(t)||"URL incorrecta. Debe comenzar con http:// o https://")}))},9324:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"blue-background pb-4",attrs:{loading:t.busy.provider,elevation:"1"}},[n("h1",{staticClass:"py-4 px-6 resize-h1"},[t._v("Documentos")]),n("v-list",{staticClass:"blue-background"},[t.pProviderDocuments.data.length?[t._l(t.pProviderDocuments.data,(function(e){return[n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-avatar",{attrs:{color:"primary",size:"48"}},[n("v-icon",{attrs:{dark:""}},[t._v("mdi-book")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.name))]),n("v-list-item-subtitle",[t._v(t._s(e.filename))]),n("v-list-item-subtitle",[t._v(t._s(e.fileType))])],1),n("v-list-item-action",{staticStyle:{"flex-flow":"row","align-items":"center"}},[n("v-btn",{attrs:{icon:""},on:{click:function(n){return t.handleDownloadClick(e)}}},[n("v-icon",[t._v("mdi-download")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(n){return t.handleUpdateClick(e)}}},[n("v-icon",[t._v("mdi-upload")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(n){return t.handleDeleteClick(e)}}},[n("v-icon",[t._v("mdi-delete")])],1)],1)],1)]}))]:[n("v-list-item",[n("v-list-item-avatar",{attrs:{color:"grey",size:"48"}},[n("v-icon",{attrs:{dark:""}},[t._v("mdi-book")])],1),n("v-list-item-content",[n("v-list-item-subtitle",[t._v("Sin documentos.")])],1)],1)]],2),n("v-fab-transition",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.busy.provider,expression:"!busy.provider"}],attrs:{absolute:"",top:"",color:"accent",elevation:"3",fab:"",right:""},on:{click:function(e){t.dialogs.create=!0}}},[n("v-icon",[t._v("mdi-file-plus")])],1)],1),n("v-dialog",{attrs:{width:"600"},model:{value:t.dialogs.create,callback:function(e){t.$set(t.dialogs,"create",e)},expression:"dialogs.create"}},[n("app-layout-form",{attrs:{loading:t.busy.create,title:"Agregar documento","reset-text":"limpiar","submit-text":"subir"},on:{reset:t.handleCreateReset,submit:t.handleCreateSubmit}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Nombre",outlined:"",placeholder:"Nombre del documento",rules:t.nameRules},model:{value:t.pProviderDocument.name,callback:function(e){t.$set(t.pProviderDocument,"name",e)},expression:"pProviderDocument.name"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp","append-icon":"mdi-file",label:"Archivo",outlined:"",placeholder:"Haz clic para seleccionar un archivo","prepend-icon":"",rules:t.fileRules},model:{value:t.pProviderDocument.file,callback:function(e){t.$set(t.pProviderDocument,"file",e)},expression:"pProviderDocument.file"}})],1)],1)],1),n("v-dialog",{attrs:{persistent:"",width:"600"},model:{value:t.dialogs.delete,callback:function(e){t.$set(t.dialogs,"delete",e)},expression:"dialogs.delete"}},[n("app-layout-alert",{attrs:{title:"Eliminar documento",subtitle:"Â¿Esta seguro en eliminar el documento?",type:"error"}},[n("v-btn",{attrs:{color:"error darken-2",depressed:"",loading:t.busy.delete},on:{click:t.handleDeleteSubmit}},[t._v("si, eliminar")]),n("v-btn",{attrs:{depressed:"",disabled:t.busy.delete},on:{click:function(e){t.dialogs.delete=!1}}},[t._v("no")])],1)],1),n("v-dialog",{attrs:{width:"600"},model:{value:t.dialogs.update,callback:function(e){t.$set(t.dialogs,"update",e)},expression:"dialogs.update"}},[n("app-layout-form",{attrs:{loading:t.busy.update,title:"Actualizar documento","reset-text":"limpiar","submit-text":"subir"},on:{reset:t.handleUpdateReset,submit:t.handleUpdateSubmit}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Nombre",outlined:"",placeholder:"Nombre del documento",rules:t.nameRules},model:{value:t.pProviderDocumentUpdate.name,callback:function(e){t.$set(t.pProviderDocumentUpdate,"name",e)},expression:"pProviderDocumentUpdate.name"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp",label:"Archivo",outlined:"",placeholder:"Seleccionar documento","prepend-icon":""},model:{value:t.pProviderDocumentUpdate.file,callback:function(e){t.$set(t.pProviderDocumentUpdate,"file",e)},expression:"pProviderDocumentUpdate.file"}})],1)],1)],1)],1)},i=[],o=n("5530"),u=n("c7eb"),c=n("1da1"),a=(n("d3b7"),n("fcd2")),s=n("8f43"),l={name:"v-view-provider",data:function(){return{busy:{create:!1,delete:!1,update:!1,provider:!1},dialogs:{create:!1,delete:!1,update:!1},pProvider:{},pProviderDocument:{},pProviderDocumentUpdate:{},pProviderDocumentReset:{},pProviderDocumentDeleteId:null,pProviderDocuments:{data:[]}}},methods:{handleCreateReset:function(){var t=this;return Object(c["a"])(Object(u["a"])().mark((function e(){return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.pProviderDocument=a["a"].toDocument();case 1:case"end":return e.stop()}}),e)})))()},handleCreateSubmit:function(){var t=this;return Object(c["a"])(Object(u["a"])().mark((function e(){return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.busy.create=!0,e.next=3,a["a"].document(t.pProvider,t.pProviderDocument).then(t.handleSuccess).catch(t.handleError).finally(t.handleReset);case 3:t.busy.create=!1,t.dialogs.create=!1;case 5:case"end":return e.stop()}}),e)})))()},handleDeleteClick:function(t){this.dialogs.delete=!0,this.pProviderDocumentDeleteId=t.id},handleDeleteSubmit:function(){var t=this;return Object(c["a"])(Object(u["a"])().mark((function e(){return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.busy.delete=!0,e.next=3,a["a"].documentDelete(t.pProvider,t.pProviderDocumentDeleteId).then(t.handleSuccess).catch(t.handleError).finally(t.handleReset);case 3:t.busy.delete=!1;case 4:case"end":return e.stop()}}),e)})))()},handleDownloadClick:function(t){var e=this;return Object(c["a"])(Object(u["a"])().mark((function n(){return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.busy.provider=!0,n.next=3,a["a"].documentDownload(e.pProvider,t);case 3:e.busy.provider=!1;case 4:case"end":return n.stop()}}),n)})))()},handleReset:function(){var t=this;return Object(c["a"])(Object(u["a"])().mark((function e(){return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.busy.provider=!0,e.next=3,a["a"].getById(t.$provider.id);case 3:return t.pProvider=e.sent,e.next=6,t.pProvider.many("document").query().param("get_all_results","true").get();case 6:t.pProviderDocuments=e.sent,t.busy.provider=!1;case 8:case"end":return e.stop()}}),e)})))()},handleUpdateClick:function(t){this.dialogs.update=!0,this.pProviderDocumentReset=Object(o["a"])({},t),this.pProviderDocumentUpdate=Object(o["a"])({},t)},handleUpdateReset:function(){this.pProviderDocumentUpdate=Object(o["a"])({},this.pProviderDocumentReset)},handleUpdateSubmit:function(){var t=this;return Object(c["a"])(Object(u["a"])().mark((function e(){return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.busy.update=!0,e.next=3,a["a"].documentUpdate(t.pProvider,t.pProviderDocumentUpdate).then(t.handleSuccess).catch(t.handleError);case 3:t.busy.update=!1;case 4:case"end":return e.stop()}}),e)})))()},handleError:function(t){a["a"].translate(t).then(this.$toast.error)},handleSuccess:function(t){this.dialogs.create=!1,this.dialogs.delete=!1,this.dialogs.update=!1,a["a"].translate({response:t}).then(this.$toast.success)}},created:function(){this.handleReset(),this.handleCreateReset()},props:{fileRules:{type:Array,default:function(){return[s["a"].required]}},nameRules:{type:Array,default:function(){return[s["a"].required,s["a"].max(200)]}}}},f=l,d=n("2877"),p=n("6544"),h=n.n(p),m=n("8336"),v=n("b0af"),b=n("62ad"),y=n("169a"),g=n("0789"),w=n("23a7"),j=n("132d"),k=n("8860"),O=n("da13"),P=n("1800"),x=n("8270"),D=n("5d23"),_=n("8654"),R=Object(d["a"])(f,r,i,!1,null,null,null);e["default"]=R.exports;h()(R,{VBtn:m["a"],VCard:v["a"],VCol:b["a"],VDialog:y["a"],VFabTransition:g["c"],VFileInput:w["a"],VIcon:j["a"],VList:k["a"],VListItem:O["a"],VListItemAction:P["a"],VListItemAvatar:x["a"],VListItemContent:D["b"],VListItemSubtitle:D["c"],VListItemTitle:D["d"],VTextField:_["a"]})}}]);
//# sourceMappingURL=g-user-account-documents.17e795b9.js.map