(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mc-mining-company-profile"],{"1a4d":function(t,e,a){},"54bc":function(t,e,a){"use strict";a("1a4d")},"67aa":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-layout-frame",{attrs:{container:"narrow pb-16",section:"grey lighten-4",title:"Mis datos de compaÃ±Ã­a minera"}},[a("v-container",{attrs:{fluid:"","pa-0":""}},[a("v-row",[a("v-col",{attrs:{sm:"12",md:"4"}},[a("v-card",{attrs:{color:"#fff4e4",elevation:"1",loading:t.busy.company}},[a("v-card-text",{staticClass:"text-center"},[a("v-btn",{attrs:{height:"200",text:""},on:{click:function(e){t.dialogs.image=!0}}},[a("span",{staticStyle:{position:"absolute","z-index":"3"}},[t._v("cambiar imagen")]),a("v-avatar",{staticClass:"rounded",attrs:{size:"180",tile:""}},[a("v-img",{attrs:{src:t.mcMiningCompany.imgSrc}})],1)],1)],1),a("v-list",{staticClass:"pa-0",attrs:{nav:""}},[a("v-list-item",{staticClass:"box-side-orange px-0 pt-0 my-0 rounded-t-lg",attrs:{"active-class":"active-color",exact:"",to:"/perfil/minera"}},[a("v-list-item-content",{staticClass:"content-orange py-0"},[a("v-list-item-title",{staticClass:"title-orange rounded-t-lg pl-2 py-2 mt-0"},[t._v("General")]),a("v-list-item-subtitle",{staticClass:"subtitle-normal pb-3 pl-2 py-2 mt-0"},[t._v("Nombre, rut, correo...")])],1)],1),t.isMiningCompanyAdmin?a("v-list-item",{staticClass:"box-side-orange px-0 pt-0 my-0 rounded-t-lg",attrs:{"active-class":"active-color",exact:"",to:"/perfil/minera/usuarios"}},[a("v-list-item-content",{staticClass:"content-orange py-0"},[a("v-list-item-title",{staticClass:"title-orange rounded-t-lg pl-2 py-2 mt-0"},[t._v("Usuarios")]),a("v-list-item-subtitle",{staticClass:"subtitle-normal pb-3 pl-2 py-2 mt-0"},[t._v("Crear usuario para la compaÃ±Ã­a minera")])],1)],1):t._e(),a("v-list-item",{staticClass:"box-side-orange px-0 pt-0 my-0 rounded-t-lg",attrs:{"active-class":"active-color",exact:"",to:"/perfil/minera/plataformas"}},[a("v-list-item-content",{staticClass:"content-orange py-0"},[a("v-list-item-title",{staticClass:"title-orange rounded-t-lg pl-2 py-2 mt-0"},[t._v("Plataformas")]),a("v-list-item-subtitle",{staticClass:"subtitle-normal pb-3 pl-2 py-2 mt-0"},[t._v("ConfiguraciÃ³n zoom")])],1)],1)],1)],1)],1),a("v-col",{attrs:{sm:"12",md:"8"}},[a("router-view")],1),a("v-dialog",{attrs:{width:"600"},model:{value:t.dialogs.image,callback:function(e){t.$set(t.dialogs,"image",e)},expression:"dialogs.image"}},[a("app-layout-form",{attrs:{"reset-text":"limpiar","submit-text":"subir",title:"Subir logo de compaÃ±Ã­a"},on:{reset:t.handleImageReset,submit:t.handleImageSubmit}},[a("v-col",{attrs:{cols:"12"}},[a("v-file-input",{model:{value:t.mcMiningCompany.image,callback:function(e){t.$set(t.mcMiningCompany,"image",e)},expression:"mcMiningCompany.image"}})],1)],1)],1)],1)],1)],1)},i=[],s=a("c7eb"),r=a("1da1"),o=a("da85"),c={name:"v-view-mining-company-profile",data:function(){return{busy:{company:!1},dialogs:{image:!1},mcMiningCompany:{image:"",imgSrc:""}}},methods:{getMiningCompany:function(){var t=this;return Object(r["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.busy.company=!0,e.next=3,o["a"].getById(t.$user.profile.relatedId);case 3:t.mcMiningCompany=e.sent,t.busy.company=!1;case 5:case"end":return e.stop()}}),e)})))()},handleImageError:function(t){o["a"].translate(t).then(this.$toast.error)},handleImageReset:function(){this.mcMiningCompany.image=""},handleImageSubmit:function(){var t=this;return Object(r["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.busy.company=!0,e.next=3,o["a"].logo(t.mcMiningCompany).then(t.handleImageSuccess).then(t.getMiningCompany).catch(t.handleImageError);case 3:t.busy.company=!1;case 4:case"end":return e.stop()}}),e)})))()},handleImageSuccess:function(t){o["a"].translate({response:t}).then(this.$toast.success)}},mounted:function(){this.getMiningCompany()}},l=c,u=(a("54bc"),a("2877")),m=a("6544"),d=a.n(m),p=a("8212"),g=a("8336"),v=a("b0af"),y=a("99d9"),f=a("62ad"),h=a("a523"),b=a("169a"),C=a("23a7"),w=a("adda"),k=a("8860"),x=a("da13"),I=a("5d23"),j=a("0fd9"),M=Object(u["a"])(l,n,i,!1,null,null,null);e["default"]=M.exports;d()(M,{VAvatar:p["a"],VBtn:g["a"],VCard:v["a"],VCardText:y["c"],VCol:f["a"],VContainer:h["a"],VDialog:b["a"],VFileInput:C["a"],VImg:w["a"],VList:k["a"],VListItem:x["a"],VListItemContent:I["b"],VListItemSubtitle:I["c"],VListItemTitle:I["d"],VRow:j["a"]})},da85:function(t,e,a){"use strict";a.d(e,"a",(function(){return u}));var n=a("d4ec"),i=a("bee2"),s=a("262e"),r=a("2caf"),o=(a("7db0"),a("d3b7"),a("ce42")),c=a("cf67"),l=function(t){Object(s["a"])(a,t);var e=Object(r["a"])(a);function a(t){var i;return Object(n["a"])(this,a),i=e.call(this,t),i.longitude=i.prop("address.longitude",0),i.latitude=i.prop("address.latitude",0),i.address&&i.address.address&&(i.address=i.prop("address.address","")),i}return Object(i["a"])(a,[{key:"defaultLogo",get:function(){return"https://www.market-research-companies.in//images/default.jpg"}},{key:"hasMediumLogo",get:function(){return""!==this.prop("mediumLogo","")}},{key:"imgSrc",get:function(){return this.hasMediumLogo?this.mediumLogoInBase64:this.defaultLogo}},{key:"mediumLogoInBase64",get:function(){return"data:image/jpeg;base64,".concat(this.mediumLogo)}}],[{key:"resource",value:function(){return"mining_company"}}]),a}(c["a"]),u=function(t){Object(s["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(i["a"])(a,null,[{key:"create",value:function(t){return this.shape(t).save()}},{key:"model",value:function(){return l}},{key:"getAll",value:function(){return this.query().limit(-1).get()}},{key:"getBy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.query().page(t.page).limit(t.limit).paginate()}},{key:"getById",value:function(t){return this.query().find(t)}},{key:"getAllPaginate",value:function(){return this.query().param("get_all_results",!0).paginate()}},{key:"logo",value:function(t){return t.many("logo").transfer(t.form(["image"]))}},{key:"newUser",value:function(t){return this.shape({id:"new_user"}).attach(t)}},{key:"toCreate",value:function(){return this.shape({rut:"",businessName:"",name:"",email:"",phone:"",password:"",address:"",latitude:0,longitude:0})}},{key:"toUser",value:function(){return this.shape({rut:"",name:"",email:"",password:"",miningId:null})}},{key:"update",value:function(t){return this.shape(t).sync(t)}}]),a}(o["a"])}}]);
//# sourceMappingURL=mc-mining-company-profile.d2b6e012.js.map