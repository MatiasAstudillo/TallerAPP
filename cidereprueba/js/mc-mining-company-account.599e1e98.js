(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mc-mining-company-account"],{"05b7":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("app-layout-form",{staticClass:"blue-background",attrs:{loading:t.busy.company,"reset-text":"limpiar","submit-text":"guardar",title:"General",noTitle:!0,submitProps:t.propsSubmit,resetProps:t.resetProps},on:{reset:t.handleCompanyReset,submit:t.handleCompanySubmit}},[e("v-col",{staticClass:"pb-2 my-4",attrs:{cols:"12"}},[e("h1",{staticClass:"resize-h1"},[t._v("General")])]),e("v-col",{attrs:{cols:"12"}},[e("v-row",[e("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[e("div",{staticClass:"orange-background-input text-center elevation-2 pa-2 text-h6"},[t._v("Correo electrÃ³nico:")])]),e("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[e("vw-validation",{attrs:{rules:t.emailRules,"input-value":t.mcMiningCompany.email},scopedSlots:t._u([{key:"default",fn:function(n){return e("v-text-field",t._b({attrs:{solo:"","background-color":"#f8f4fc",label:"Correo electrÃ³nico",loading:t.busy.email,placeholder:"nombre@dominio.com"},model:{value:t.mcMiningCompany.email,callback:function(n){t.$set(t.mcMiningCompany,"email",n)},expression:"mcMiningCompany.email"}},"v-text-field",n,!1))}}])})],1)],1)],1),e("v-col",{attrs:{cols:"12"}},[e("v-row",[e("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[e("div",{staticClass:"orange-background-input text-center elevation-2 pa-2 text-h6"},[t._v("Nombre:")])]),e("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[e("v-text-field",{attrs:{solo:"","background-color":"#f8f4fc",label:"Nombre",placeholder:"Nombre",rules:t.nameRules},model:{value:t.mcMiningCompany.name,callback:function(n){t.$set(t.mcMiningCompany,"name",n)},expression:"mcMiningCompany.name"}})],1)],1)],1),e("v-col",{attrs:{cols:"12"}},[e("v-row",[e("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[e("div",{staticClass:"orange-background-input text-center elevation-2 pa-2 text-h6"},[t._v("RazÃ³n Social:")])]),e("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[e("vw-validation",{attrs:{rules:t.nameRules,"input-value":t.mcMiningCompany.businessName},scopedSlots:t._u([{key:"default",fn:function(n){return e("v-text-field",t._b({attrs:{solo:"","background-color":"#f8f4fc",placeholder:"Juan Perez SPA"},model:{value:t.mcMiningCompany.businessName,callback:function(n){t.$set(t.mcMiningCompany,"businessName",n)},expression:"mcMiningCompany.businessName"}},"v-text-field",n,!1))}}])})],1)],1)],1),e("v-col",{attrs:{cols:"12"}},[e("v-row",[e("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[e("div",{staticClass:"orange-background-input text-center elevation-2 pa-2 text-h6"},[t._v("DirecciÃ³n:")])]),e("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[e("vw-validation",{attrs:{rules:t.addressRules,"input-value":t.mcMiningCompany.address},scopedSlots:t._u([{key:"default",fn:function(n){return e("v-text-field",t._b({attrs:{solo:"","background-color":"#f8f4fc",label:"DirecciÃ³n",placeholder:"DirecciÃ³n (Calle, #Numero)"},model:{value:t.mcMiningCompany.address,callback:function(n){t.$set(t.mcMiningCompany,"address",n)},expression:"mcMiningCompany.address"}},"v-text-field",n,!1))}}])})],1)],1)],1),e("v-col",{attrs:{cols:"12"}},[e("v-row",[e("v-col",{staticClass:"pr-0",attrs:{cols:"4"}},[e("div",{staticClass:"orange-background-input text-center elevation-2 pa-2 text-h6"},[t._v("TelÃ©fono:")])]),e("v-col",{staticClass:"pl-0",attrs:{cols:"8"}},[e("vw-validation",{attrs:{rules:t.phoneRules,"input-value":t.mcMiningCompany.phone},scopedSlots:t._u([{key:"default",fn:function(n){return e("v-text-field",t._b({attrs:{solo:"","background-color":"#f8f4fc",label:"TelÃ©fono",placeholder:"987654321",prefix:"+ 56"},model:{value:t.mcMiningCompany.phone,callback:function(n){t.$set(t.mcMiningCompany,"phone",n)},expression:"mcMiningCompany.phone"}},"v-text-field",n,!1))}}])})],1)],1)],1)],1)},i=[],o=e("c7eb"),u=e("1da1"),a=e("da85"),c=e("8f43"),s={name:"v-view-account",data:function(){return{propsSubmit:{color:"secondary",plain:!1,text:!1},resetProps:{color:"primary",text:!1},busy:{company:!1},mcMiningCompany:{}}},methods:{handleCompanyError:function(t){a["a"].translate(t).then(this.$toast.error)},handleCompanyReset:function(){var t=this;return Object(u["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.busy.company=!0,n.next=3,a["a"].getById(t.$user.profile.relatedId);case 3:t.mcMiningCompany=n.sent,t.busy.company=!1;case 5:case"end":return n.stop()}}),n)})))()},handleCompanySubmit:function(){var t=this;return Object(u["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.busy.company=!0,n.next=3,a["a"].update(t.mcMiningCompany).then(t.handleCompanySuccess).catch(t.handleCompanyError);case 3:t.busy.company=!1;case 4:case"end":return n.stop()}}),n)})))()},handleCompanySuccess:function(t){a["a"].translate({response:t}).then(this.$toast.success)}},mounted:function(){this.handleCompanyReset()},props:{addressRules:{type:Array,default:function(){return[c["a"].required,c["a"].max(255)]}},emailRules:{type:Array,default:function(){return[c["a"].required,c["a"].email,c["a"].max(40)]}},nameRules:{type:Array,default:function(){return[c["a"].required,c["a"].max(200)]}},passwordRules:{type:Array,default:function(){return[c["a"].required,c["a"].min(6),c["a"].max(20)]}},phoneRules:{type:Array,default:function(){return[c["a"].required,c["a"].length(9),c["a"].numeric]}},rutRules:{type:Array,default:function(){return[c["a"].required,c["a"].rut,c["a"].max(12)]}}}},l=s,f=(e("2951"),e("2877")),p=e("6544"),m=e.n(p),h=e("62ad"),d=e("0fd9"),y=e("8654"),v=Object(f["a"])(l,r,i,!1,null,null,null);n["default"]=v.exports;m()(v,{VCol:h["a"],VRow:d["a"],VTextField:y["a"]})},2951:function(t,n,e){"use strict";e("b88d")},"8f43":function(t,n,e){"use strict";e.d(n,"a",(function(){return j}));var r=e("bee2"),i=e("d4ec"),o=e("ade3"),u=(e("ac1f"),e("00b4"),e("d3b7"),e("25f0"),e("5319"),e("fb6a"),function(t,n,e,r){this.name=t,this.fn=n,this.args=e,this.modifiers=r});function a(t,n){return void 0===n&&(n="simple"),"object"===typeof t?t[n]:t}function c(t,n){if(t.length){var e=t.shift(),r=c(t,n);return e.perform(r)}return a(n)}function s(t,n){if(t.length){var e=t.shift(),r=s(t,n);return e.performAsync(r)}return function(t){return Promise.resolve(a(n,"async")(t))}}u.prototype._test=function(t){var n=this.fn;try{c(this.modifiers.slice(),n)(t)}catch(e){n=function(){return!1}}try{return c(this.modifiers.slice(),n)(t)}catch(r){return!1}},u.prototype._check=function(t){try{c(this.modifiers.slice(),this.fn)(t)}catch(n){if(c(this.modifiers.slice(),(function(t){return t}))(!1))return}if(!c(this.modifiers.slice(),this.fn)(t))throw null},u.prototype._testAsync=function(t){var n=this;return new Promise((function(e,r){s(n.modifiers.slice(),n.fn)(t).then((function(n){n?e(t):r(null)})).catch((function(t){return r(t)}))}))};var l=function(t,n,e){this.name=t,this.perform=n,this.performAsync=e},f=function(t){function n(e,r,i,o){var u=[],a=arguments.length-4;while(a-- >0)u[a]=arguments[a+4];t.call(this,u),t.captureStackTrace&&t.captureStackTrace(this,n),this.rule=e,this.value=r,this.cause=i,this.target=o}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(Error),p=function(t,n){void 0===t&&(t=[]),void 0===n&&(n=[]),this.chain=t,this.nextRuleModifiers=n};function m(t,n,e,r){if(n.length){var i=n.shift();i._testAsync(t).then((function(){m(t,n,e,r)}),(function(n){r(new f(i,t,n))}))}else e(t)}function h(){return void 0!==typeof Proxy?y(new p):v(new p)}p.prototype._applyRule=function(t,n){var e=this;return function(){var r=[],i=arguments.length;while(i--)r[i]=arguments[i];return e.chain.push(new u(n,t.apply(e,r),r,e.nextRuleModifiers)),e.nextRuleModifiers=[],e}},p.prototype._applyModifier=function(t,n){return this.nextRuleModifiers.push(new l(n,t.simple,t.async)),this},p.prototype._clone=function(){return new p(this.chain.slice(),this.nextRuleModifiers.slice())},p.prototype.test=function(t){return this.chain.every((function(n){return n._test(t)}))},p.prototype.testAll=function(t){var n=[];return this.chain.forEach((function(e){try{e._check(t)}catch(r){n.push(new f(e,t,r))}})),n},p.prototype.check=function(t){this.chain.forEach((function(n){try{n._check(t)}catch(e){throw new f(n,t,e)}}))},p.prototype.testAsync=function(t){var n=this;return new Promise((function(e,r){m(t,n.chain.slice(),e,r)}))};var d={};function y(t){return new Proxy(t,{get:function(n,e){if(e in n)return n[e];var r=y(t._clone());return e in g?r._applyModifier(g[e],e):e in d?r._applyRule(d[e],e):e in w?r._applyRule(w[e],e):void 0}})}function v(t){var n=function(t,n){return Object.keys(t).forEach((function(e){n[e]=function(){var r=[],i=arguments.length;while(i--)r[i]=arguments[i];var o=v(n._clone()),u=o._applyRule(t[e],e).apply(void 0,r);return u}})),n},e=n(w,t),r=n(d,e);return Object.keys(g).forEach((function(t){Object.defineProperty(r,t,{get:function(){var n=v(r._clone());return n._applyModifier(g[t],t)}})})),r}h.extend=function(t){Object.assign(d,t)},h.clearCustomRules=function(){d={}};var g={not:{simple:function(t){return function(n){return!t(n)}},async:function(t){return function(n){return Promise.resolve(t(n)).then((function(t){return!t})).catch((function(){return!0}))}}},some:{simple:function(t){return function(n){return b(n).some((function(n){try{return t(n)}catch(e){return!1}}))}},async:function(t){return function(n){return Promise.all(b(n).map((function(n){try{return t(n).catch((function(){return!1}))}catch(e){return!1}}))).then((function(t){return t.some(Boolean)}))}}},every:{simple:function(t){return function(n){return!1!==n&&b(n).every(t)}},async:function(t){return function(n){return Promise.all(b(n).map(t)).then((function(t){return t.every(Boolean)}))}}}};function b(t){return"string"===typeof t?t.split(""):t}var w={equal:function(t){return function(n){return n==t}},exact:function(t){return function(n){return n===t}},number:function(t){return void 0===t&&(t=!0),function(n){return"number"===typeof n&&(t||isFinite(n))}},integer:function(){return function(t){var n=Number.isInteger||k;return n(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return C("string")},boolean:function(){return C("boolean")},undefined:function(){return C("undefined")},null:function(){return C("null")},array:function(){return C("array")},object:function(){return C("object")},instanceOf:function(t){return function(n){return n instanceof t}},pattern:function(t){return function(n){return t.test(n)}},lowercase:function(){return function(t){return/^([a-z]+\s*)+$/.test(t)}},uppercase:function(){return function(t){return/^([A-Z]+\s*)+$/.test(t)}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(n){return n[0]==t}},last:function(t){return function(n){return n[n.length-1]==t}},empty:function(){return function(t){return 0===t.length}},length:function(t,n){return function(e){return e.length>=t&&e.length<=(n||t)}},minLength:function(t){return function(n){return n.length>=t}},maxLength:function(t){return function(n){return n.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,n){return function(e){return e>=t&&e<=n}},range:function(t,n){return function(e){return e>=t&&e<=n}},lessThan:function(t){return function(n){return n<t}},lessThanOrEqual:function(t){return function(n){return n<=t}},greaterThan:function(t){return function(n){return n>t}},greaterThanOrEqual:function(t){return function(n){return n>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(n){return~n.indexOf(t)}},schema:function(t){return x(t)},passesAnyOf:function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];return function(n){return t.some((function(t){return t.test(n)}))}},optional:function(t,n){return void 0===n&&(n=!1),function(e){return n&&"string"===typeof e&&""===e.trim()||void 0!==e&&null!==e&&t.check(e),!0}}};function C(t){return function(n){return Array.isArray(n)&&"array"===t||null===n&&"null"===t||typeof n===t}}function k(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}function x(t){return{simple:function(n){var e=[];if(Object.keys(t).forEach((function(r){var i=t[r];try{i.check((n||{})[r])}catch(o){o.target=r,e.push(o)}})),e.length>0)throw e;return!0},async:function(n){var e=[],r=Object.keys(t).map((function(r){var i=t[r];return i.testAsync((n||{})[r]).catch((function(t){t.target=r,e.push(t)}))}));return Promise.all(r).then((function(){if(e.length>0)throw e;return!0}))}}}var _=h,j=Object(r["a"])((function t(){Object(i["a"])(this,t)}));Object(o["a"])(j,"email",(function(t){return _().string().pattern(/[^\s@]+@[^\s@]+\.[^\s@]+/).test(t)||"Formato incorrecto."})),Object(o["a"])(j,"length",(function(t){return function(n){return _().length(t).test(n.toString())||"".concat(t," caracteres.")}})),Object(o["a"])(j,"numeric",(function(t){return _().numeric().test(t)||"Solo nÃºmeros."})),Object(o["a"])(j,"max",(function(t){return function(n){return _().string().maxLength(t).test(n)||"MÃ¡ximo ".concat(t," caracteres.")}})),Object(o["a"])(j,"min",(function(t){return function(n){return _().string().minLength(t).test(n)||"MÃ­nimo ".concat(t," caracteres.")}})),Object(o["a"])(j,"required",(function(t){return _().not.null().test(t)||"Campo requerido."})),Object(o["a"])(j,"notEmpty",(function(t){return _().string().minLength(1).test(t)||"Campo requerido."})),Object(o["a"])(j,"rut",(function(t){if("70298600-0"===t)return!0;for(var n=t.toString().toLowerCase(),e=n.replace(/\./g,"").replace(/-/g,""),r=e.slice(0,-1),i=e.slice(-1),o=0,u=7,a=2,c=1;c<=r.length;c++)o+=a*e.charAt(r.length-c),a=a<u?a+1:2;var s=11-o%11;return(10==s?"k":11==s?"0":s)==i||"Rut invalido."})),Object(o["a"])(j,"select",(function(t){return _().numeric().test(t)||"Selecciona una opciÃ³n."})),Object(o["a"])(j,"url",(function(t){return!t||(_().string().pattern(/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/).test(t)||"URL incorrecta.")})),Object(o["a"])(j,"urlhttps",(function(t){return!t||(_().string().pattern(/^(http[s]?:\/\/){1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/).test(t)||"URL incorrecta. Debe comenzar con http:// o https://")}))},b88d:function(t,n,e){},da85:function(t,n,e){"use strict";e.d(n,"a",(function(){return l}));var r=e("d4ec"),i=e("bee2"),o=e("262e"),u=e("2caf"),a=(e("7db0"),e("d3b7"),e("ce42")),c=e("cf67"),s=function(t){Object(o["a"])(e,t);var n=Object(u["a"])(e);function e(t){var i;return Object(r["a"])(this,e),i=n.call(this,t),i.longitude=i.prop("address.longitude",0),i.latitude=i.prop("address.latitude",0),i.address&&i.address.address&&(i.address=i.prop("address.address","")),i}return Object(i["a"])(e,[{key:"defaultLogo",get:function(){return"https://www.market-research-companies.in//images/default.jpg"}},{key:"hasMediumLogo",get:function(){return""!==this.prop("mediumLogo","")}},{key:"imgSrc",get:function(){return this.hasMediumLogo?this.mediumLogoInBase64:this.defaultLogo}},{key:"mediumLogoInBase64",get:function(){return"data:image/jpeg;base64,".concat(this.mediumLogo)}}],[{key:"resource",value:function(){return"mining_company"}}]),e}(c["a"]),l=function(t){Object(o["a"])(e,t);var n=Object(u["a"])(e);function e(){return Object(r["a"])(this,e),n.apply(this,arguments)}return Object(i["a"])(e,null,[{key:"create",value:function(t){return this.shape(t).save()}},{key:"model",value:function(){return s}},{key:"getAll",value:function(){return this.query().limit(-1).get()}},{key:"getBy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.query().page(t.page).limit(t.limit).paginate()}},{key:"getById",value:function(t){return this.query().find(t)}},{key:"getAllPaginate",value:function(){return this.query().param("get_all_results",!0).paginate()}},{key:"logo",value:function(t){return t.many("logo").transfer(t.form(["image"]))}},{key:"newUser",value:function(t){return this.shape({id:"new_user"}).attach(t)}},{key:"toCreate",value:function(){return this.shape({rut:"",businessName:"",name:"",email:"",phone:"",password:"",address:"",latitude:0,longitude:0})}},{key:"toUser",value:function(){return this.shape({rut:"",name:"",email:"",password:"",miningId:null})}},{key:"update",value:function(t){return this.shape(t).sync(t)}}]),e}(a["a"])}}]);
//# sourceMappingURL=mc-mining-company-account.599e1e98.js.map